(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{664:function(e,o,v){"use strict";v.r(o);var _=v(11),t=Object(_.a)({},(function(){var e=this,o=e.$createElement,v=e._self._c||o;return v("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[v("p",[e._v("CSRF（Cross-site request forgery）跨站请求伪造：攻击者诱导受害者进入第三方网站，在第三方网站中，向被攻击网站发送跨站请求。利用受害者在被攻击网站已经获取的注册凭证，绕过后台的用户验证，达到冒充用户对被攻击的网站执行某项操作的目的。")]),e._v(" "),v("blockquote",[v("p",[e._v("典型 CSRF 攻击流程:")])]),e._v(" "),v("ul",[v("li",[e._v("受害者登录 A 站点，并保留了登录凭证（Cookie）")]),e._v(" "),v("li",[e._v("攻击者诱导受害者访问了站点 B")]),e._v(" "),v("li",[e._v("站点 B 向站点 A 发送了一个请求，浏览器会默认携带站点 A 的 Cookie 信息")]),e._v(" "),v("li",[e._v("站点 A 接收到请求后，对请求进行验证，并确认是受害者的凭证，误以为是无辜的受害者发送的请求")]),e._v(" "),v("li",[e._v("站点 A 以受害者的名义执行了站点 B 的请求")]),e._v(" "),v("li",[e._v("攻击完成，攻击者在受害者不知情的情况下，冒充受害者完成了攻击")])]),e._v(" "),v("blockquote",[v("p",[e._v("CSRF 的特点")])]),e._v(" "),v("ol",[v("li",[e._v("攻击通常在第三方网站发起，如图上的站点 B，站点 A 无法防止攻击发生。")]),e._v(" "),v("li",[e._v("攻击利用受害者在被攻击网站的登录凭证，冒充受害者提交操作；并不会去获取 cookie 信息(cookie 有同源策略)")]),e._v(" "),v("li",[e._v("跨站请求可以用各种方式：图片 URL、超链接、CORS、Form 提交等等(来源不明的链接，不要点击)")])]),e._v(" "),v("blockquote",[v("p",[e._v("CSRF 攻击防御")])]),e._v(" "),v("ol",[v("li",[e._v("添加验证码(体验不好)")])]),e._v(" "),v("p",[e._v("验证码能够防御 CSRF 攻击，但是我们不可能每一次交互都需要验证码，否则用户的体验会非常差，但是我们可以在转账，交易等操作时，增加验证码，确保我们的账户安全")]),e._v(" "),v("ol",{attrs:{start:"2"}},[v("li",[e._v("判断请求的来源：检测 Referer(并不安全，Referer 可以被更改)")])]),e._v(" "),v("p",[v("code",[e._v("Referer")]),e._v(" 可以作为一种辅助手段，来判断请求的来源是否是安全的，但是鉴于 "),v("code",[e._v("Referer")]),e._v(" 本身是可以被修改的，因为不能仅依赖于 "),v("code",[e._v("Referer")])]),e._v(" "),v("ol",{attrs:{start:"3"}},[v("li",[e._v("使用 Token(主流)")])]),e._v(" "),v("p",[e._v("CSRF 攻击之所以能够成功，是因为服务器误把攻击者发送的请求当成了用户自己的请求。那么我们可以要求所有的用户请求都携带一个 CSRF 攻击者无法获取到的 Token。服务器通过校验请求是否携带正确的 Token，来把正常的请求和攻击的请求区分开。跟验证码类似，只是用户无感知。")]),e._v(" "),v("ul",[v("li",[e._v("服务端给用户生成一个 token，加密后传递给用户")]),e._v(" "),v("li",[e._v("用户在提交请求时，需要携带这个 token")]),e._v(" "),v("li",[e._v("服务端验证 token 是否正确")])]),e._v(" "),v("ol",{attrs:{start:"4"}},[v("li",[e._v("Samesite Cookie 属性")])]),e._v(" "),v("p",[e._v("用来标明这个 Cookie 是个“同站 Cookie”，同站 Cookie 只能作为第一方 Cookie，不能作为第三方 Cookie，Samesite 有两个属性值，分别是 Strict 和 Lax。")]),e._v(" "),v("ul",[v("li",[e._v("Strict: 表明这个 Cookie 在任何情况都不可能作为第三方的 Cookie，有能力阻止所有 CSRF 攻击。此时，我们在 B 站点下发起对 A 站点的任何请求，A 站点的 Cookie 都不会包含在 cookie 请求头中")]),e._v(" "),v("li",[e._v("Lax: 放宽了限制，允许发送安全 HTTP 方法带上 Cookie，如 "),v("code",[e._v("Get")]),e._v(" / "),v("code",[e._v("OPTIONS")]),e._v(" 、"),v("code",[e._v("HEAD")]),e._v(" 请求")])])])}),[],!1,null,null,null);o.default=t.exports}}]);